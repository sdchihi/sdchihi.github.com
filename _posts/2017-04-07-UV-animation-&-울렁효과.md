---
layout: post
title: "UV 애니메이션 & 울렁효과"
categories: Shader
tags: [Shader]
image:
  feature: atoz.jpg
  teaser: atoz_teaser.jpg
  credit:
  creditlink:
---
# UV 애니메이션

#### 기본원리

 물이 흘러가는것을 표현하려면 어떻게 해야할까 ? <br>
 - 물 텍스쳐를 입혀서 천천히 한쪽으로 이동시키면 된다!

 `시간에 따라 UV값을 변경해야 하는데 셰이더는 GPU에서 실행되기 때문에 자체적으로
 시간을 계산할 수 없다. 따라서 CPU의 도움이 필요함 (전역변수로 넘겨 받는 방법으로)`<br>


#### 구현방법
- Time 값을 받아올 변수를 만들고 Semantic을 Time0_X로 할당한다.
- 위에서 만든 Time 값을 받는 변수를 정점 셰이더에서 전역 변수로 선언한다.
- Output의 UV좌표 값을 설정할때 Input.uv + Time 으로 설정한다.
- Time값 * 상수 값으로 움직이는 속도를 조절할 수 있다.
<br><br><hr><br>
여기 까지 구현하면 텍스쳐가 그저 움직이는 표현을 할 수 있다. 그런데..<br>

#### 물이 흘러가는 모양을 보면 물결이 이는데 이건 어떻게 구현할까?



# 울렁 효과
 #### 기본 원리
- 정점위치의 Y값을 적당히 조절하면 구현할 수 있을것 같다.
- 물결을 생각해보면 파장이라고 할 수 있다. 코사인 그래프를 이용하자!

<br>

#### 구현방법
- 시간에 따라 코사인 값을 계산하는 변수가 필요하다.
- 위에서 Time을 받아온 전역변수를 사용하자.
- HLSL에서 제공하는 cos 함수를 사용하자
- 출렁이는 폭을 늘리고 싶으면 cos값을 계산한 변수에 상수를 곱해주자.
- 정점의 Y값을 저장하는 변수에 곱해준다.

`여기까지 진행하면 출렁거리는 효과까진 아니고 오브젝트가 같이 위아래로 움직이는것을 볼 수 있다.
출렁 거리는 효과를 얻기 위해서는 정점마다 달라지는 값이 필요하다. = > UV 좌표 값 사용하자.`

- 코사인 값을 계산할때 시간값 뿐만 아니라 UV좌표의 x값을 더해주자.
- 출렁이는 속도, 좀더 출렁이는 모양을 보여줄려면 시간, 좌표 값에 상수를 곱해주자.
